<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../partials/head'); %>
</head>
<body>

  <header>
    <% if (loggedIn) { %>
        <%- include('../partials/headerLogin'); %>
     <% } else { %>
        <%- include('../partials/header'); %>
     <% } %>
  
</header>
     <!-- START ACTIVITY DETAILS SECTION -->
     <div class="activityDetailsContainer">
        <div class="boxOfImages">
            <div class="images">
  
                <div class="img-holder active">
                    <img src="<%= data.images %>" alt="image active">
                </div>
  
                <!-- <div class="img-holder">
                    <img src=".." alt="image 2">
                </div>
  
                <div class="img-holder">
                  <img src=".." alt="image 3">
                </div>
  
                <div class="img-holder">
                  <img src=".." alt="image 4">
                </div> -->
  
            </div>
            
            <div class="basic-info">
              <h1 class="activity_name"><%= data.serviceName %></h1>
              <span class="activity_price"><%= data.price %> AED</span>
              
              <div class="sp_info" >
                <div class="sp_pic col-2" ><img src="<%= data.providerPic %>" width="80" class="rounded-circle" ></div>
                <div class="sp_name col" style="margin-left: 50px;" >
                  <h5><%= data.providerName %></h5>
                </div>
                
                <!--View profile section-->
                <div class="span4 proj-div" data-toggle="modal" data-target="#GSCCModal"><button class="btnForm" style="text-decoration: none;">View Profile</button></div>
                
                <div id="GSCCModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-body" style="border: none;">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" style="border: none; background-color: white;">&times;</button>
                        
                        <!-- Public profile -->
                        <div class="col-md-12">
                          <div class="profileCard p-3 py-4">
              
                            <div class="text-center">
                              <img src="<%= data.providerPic %>" width="100" class="rounded-circle">
                            </div>
                            
                            <div class="text-center mt-3">
                              <span class="btn2" style="border-radius: 5px; font-size: small; background-color: #4c4e56;">Service Provider</span><br>
                              <span class="mt-2 mb-0"><%= data.providerName %></span>
                              <div class="px-4 mt-1" >
                                <p style="color: #4c4e56;"><%= data.providerAddress %></p>
                                <p class="fonts" style="color: #4c4e56;"><%= data.providerBio %></p>
                              </div>
                              
                              <div class="buttons">
                                <a class="btn btnForm px-4 ms-3" href="<%= data.providerwpLink %>">Contact</a>
                              </div>
                            </div>
                          
                          </div>
                        </div>
                      </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
            <div class="description">
              <p><%= data.description %></p>
            <div>
              <h5> Activities Included: </h5>
              <% for (let nameAc of data.activities ){ %>
                <%= nameAc %> <br>
              <%}%>
            </div>
          </div>
          </div>
        </div>
      </div>
      
      <!-- STICKY BUTTON -->
      <a href="/reservation"><button class="sticky-btn">Reserve</button></a>
      <script>
        const stickyBtn = document.querySelector('.sticky-btn');
        
        var lastScrollTop = 0;
        
        document.addEventListener("scroll", function(){ // or window.addEventListener("scroll"....
                var st = window.pageYOffset || document.documentElement.scrollTop; // Credits: "https://github.com/qeremy/so/blob/master/so.dom.js#L426"
                if (st > lastScrollTop){
                    stickyBtn.classList.add('sticky-mode');
                } else if(st === 0 || isInViewport(stickyBtn.parentNode)) { 
                    console.log("Top of page");
                    stickyBtn.classList.remove('sticky-mode');
                } else {
                    console.log("scrolling up "+st);
                }
            
                lastScrollTop = st <= 0 ? 0 : st; // For Mobile or negative scrolling
        }, false);
            
            
            var isInViewport = function (elem) {
            var bounding = elem.getBoundingClientRect();
            return (
                bounding.top >= 0 &&
                bounding.left >= 0 &&
                bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                bounding.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        };
        </script>
  
      <!-- END ACTIVITY DETAILS SECTION -->

  <%- include('../partials/footer'); %>

</body>
</html>